# ゲームプレイ仕様アウトライン

## 1. コアループ概要
- オープンワールド方針: プレイヤーが広大なボクセル世界を自由に探索し、進行順は固定しない。探索中に発見したランドマーク、ダンジョン、資源帯を自身のペースで攻略する。
- サーバ同期ポイント: 採掘結果・クラフトレシピ解放・取引成立・クエスト進行をサーバ権威で確定し、`NetworkClient` 経由で通知。シームレス移動時もチャンク単位で同期を維持。
- KPI 指標: 1セッション 30分以上の自由探索時間を確保し、ランドマーク発見率 50%、任意イベント参加率 40% を初期目標に設定。

## 2. ワールド構成
- チャンク仕様: `32x32x32` ボクセルチャンクを基本単位とし、プレイヤー周囲 3 チャンク分を常時ストリーミング。`architecture/world-streaming.md` に詳細化予定。
- バイオーム計画: `雪原`, `溶岩洞`, `古代遺跡` の3系統を Phase1 に導入し、各バイオームで採掘資源と敵出現テーブルを差別化。
- セーフゾーン: `res://scenes/zones/hub_city.tscn` をロビー兼取引拠点とし、PvE/PvP の切り替えはゾーン境界トリガーで管理。

## 3. 経済と取引
- 通貨体系: 基本通貨 `Shard`、レア通貨 `Aetherium`、ギルド通貨 `GuildMark` の三層構造。`Shard` は日常クエストと採掘で取得、`Aetherium` は高難度イベント報酬。
- シンク計画: 拠点建築、装備修理、遠征チケット、ギルド研究に消費させ、インフレを防止。
- 取引フェーズ: Phase0 は NPC 市場のみ → Phase1 でプレイヤー間直接取引 → Phase2 でオークションボードを開放。マーケット UI は `ui/trade_market.tscn` に統合。

## 4. 戦闘と能力
- 基本アクション: `近接（剣/槌）`, `遠距離（弓/銃）`, `魔法（元素/支援）` の3カテゴリ。各カテゴリは `AbilityGraph`（Godot 専用アビリティツリー）でステート管理。
- ステータス取得: `GameState` → `PlayerStatsResource` が HP/MP/スタミナ/属性耐性を提供し、サーバ同期値を `rpc` で反映。
- コンバットループ: 攻撃 → ヒット検証（サーバ側 RayCast）→ ダメージ適用 → 状態異常通知 → UI 更新。
- 今後のタスク: `archive/legacy_unreal/Gameplay_Feature_Status.md` のトレード・メール連携項目を Godot 戦闘通知へ移植する。

## 5. 生活系コンテンツ
- 採掘: `res://scripts/gathering/mining_tool.gd` でボクセル破壊→アイテムドロップを生成し、属性汚染（穢れ）レベルに応じて追加資源を決定。
- 農業: `hydroponics_module`（仮）システムでボクセル土壌の温度/湿度パラメータを参照。季節イベントに合わせて成長速度補正を計画。
- ペット: `res://scenes/pets/companion.tscn` を召喚し、採掘補助・戦闘補助のスキルを所持。親密度によるパッシブ効果を実装予定。
- 生活 KPI: 週次ログから採掘>クラフト>取引 のバランスを可視化し、偏りが出た場合は報酬調整を実施。

## 6. フレームワーク化 TODO
- 旧ドキュメント移植: `archive/legacy_unreal/Development_Roadmap_Phase0.md` の Phase0 タスクを Godot 用に再評価し、`gameplay/roadmap_phase1.md` を作成する。
- テスト設計: Godot Integration Test を用いたボクセル破壊 E2E、戦闘シミュレーション、経済トランザクションの自動シナリオを設計。
- メトリクス連携: `operations/README.md` の KPI 設定と連動し、プレイヤー行動ログを `analytics/player_activity.jsonl` に記録する仕組みを構築。
