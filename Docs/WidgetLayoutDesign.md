# ウィジェットレイアウト設計書

## 概要
各ウィジェットの推奨レイアウト設計を提供します。レスポンシブデザイン、アクセシビリティ、ユーザビリティを考慮した構成です。

## 1. 銀行ウィジェット (BankUIWidget)

### レイアウト構造
```
┌─────────────────────────────────────┐
│  銀行ウィジェット                   │
│  ┌─────────────────────────────────┐│
│  │ ヘッダー                        ││
│  │ ┌─────┐ ┌─────┐ ┌─────┐        ││
│  │ │名前 │ │通貨 │ │×   　│        ││
│  │ └─────┘ └─────┘ └─────┘        ││
│  └─────────────────────────────────┘│
│  ┌─────────────────────────────────┐│
│  │ メインエリア                    ││
│  │ ┌─────────────┐ ┌───────────┐  ││
│  │ │ 残高        │ │ クイック  │  ││
│  │ │ 1,234,567   │ │ 預金      │  ││
│  │ │ Gold        │ │ 引出し    │  ││
│  │ └─────────────┘ └───────────┘  ││
│  └─────────────────────────────────┘│
│  ┌─────────────────────────────────┐│
│  │ 取引履歴                        ││
│  │ ┌───┐ ┌───┐ ┌───┐             ││
│  │ │全て│ │入金│ │出金│           ││
│  │ └───┘ └───┘ └───┘             ││
│  │ ┌─────────────────────────────┐││
│  │ │ 日付  種別  金額    備考    │││
│  │ └─────────────────────────────┘││
│  └─────────────────────────────────┘│
└─────────────────────────────────────┘
```

### コンポーネント配置
- **ヘッダー**: 上部固定、高さ60px
- **残高表示**: 左側、幅300px
- **クイックアクション**: 右側、幅200px
- **取引履歴**: 下部、残りスペース
- **レスポンシブ**: 画面サイズに応じて自動調整

### カラースキーム
```css
/* 銀行ウィジェットカラー */
--primary-bg: #1a1a2e;
--secondary-bg: #16213e;
--accent-color: #0f3460;
--text-primary: #ffffff;
--text-secondary: #b8b8b8;
--success-color: #00ff88;
--warning-color: #ffaa00;
--error-color: #ff4444;
```

## 2. インベントリウィジェット (InventoryUIWidget)

### レイアウト構造
```
┌─────────────────────────────────────────────────┐
│  インベントリウィジェット                              │
│  ┌─────────────────────────────────────────────┐ │
│  │ ヘッダー                                        │ │
│  │ ┌─────────────┐ ┌───────────┐ ┌───────────┐ │ │
│  │ │ フィルター  │ │ ソート    │ │ 検索      │ │ │
│  │ └─────────────┘ └───────────┘ └───────────┘ │ │
│  └─────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────┐ │
│  │ メインエリア                                    │ │
│  │ ┌─────────────────────┐ ┌─────────────────┐ │ │
│  │ │ アイテムグリッド    │ │ 詳細パネル      │ │ │
│  │ │ ┌──┐ ┌──┐ ┌──┐    │ │ ┌─────────────┐ │ │ │
│  │ │ │  │ │  │ │  │    │ │ │ アイテム名  │ │ │ │
│  │ │ └──┘ └──┘ └──┘    │ │ ├─────────────┤ │ │ │
│  │ │ ┌──┐ ┌──┐ ┌──┐    │ │ │ 説明文      │ │ │ │
│  │ │ │  │ │  │ │  │    │ │ ├─────────────┤ │ │ │
│  │ │ └──┘ └──┘ └──┘    │ │ │ 使用ボタン  │ │ │ │
│  │ │                     │ │ └─────────────┘ │ │ │
│  │ │ ┌──┐ ┌──┐ ┌──┐    │ │ ┌─────────────┐ │ │ │
│  │ │ │  │ │  │ │  │    │ │ │ 破棄ボタン  │ │ │ │
│  │ │ └──┘ └──┘ └──┘    │ │ └─────────────┘ │ │ │
│  │ └─────────────────────┘ └─────────────────┘ │ │
│  └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

### グリッド仕様
- **列数**: デフォルト5列（可変）
- **アイテムサイズ**: 64x64px
- **スペーシング**: 8px
- **スクロール**: 垂直スクロール対応
- **ドラッグ&ドロップ**: サポート

### フィルター機能
- **種類**: 武器、防具、消耗品、素材
- **レアリティ**: 通常、レア、エピック、レジェンド
- **レベル**: フィルタリングスライダー

## 3. メールウィジェット (MailUIWidget)

### レイアウト構造
```
┌─────────────────────────────────────────────────┐
│  メールウィジェット                                  │
│  ┌─────────────────────────────────────────────┐ │
│  │ ヘッダー                                        │ │
│  │ ┌─────────────┐ ┌───────────┐ ┌───────────┐ │ │
│  │ │ 新規メール  │ │ 一括受領  │ │ 閉じる    │ │ │
│  │ │ (3件)      │ │           │ │           │ │ │
│  │ └─────────────┘ └───────────┘ └───────────┘ │ │
│  └─────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────┐ │
│  │ メインエリア                                    │ │
│  │ ┌─────────────────────┐ ┌─────────────────┐ │ │
│  │ │ メールリスト        │ │ メール詳細      │ │ │
│  │ │ ┌─────────────────┐ │ │ ┌─────────────┐ │ │ │
│  │ │ │ 📧 件名1        │ │ │ │ 件名        │ │ │ │
│  │ │ │ 📧 件名2        │ │ │ ├─────────────┤ │ │ │
│  │ │ │ 📧 件名3        │ │ │ │ 送信者      │ │ │ │
│  │ │ └─────────────────┘ │ │ ├─────────────┤ │ │ │
│  │ │                     │ │ │ 本文        │ │ │ │
│  │ │ ┌─────────────────┐ │ │ ├─────────────┤ │ │ │
│  │ │ │ 📧 件名4        │ │ │ │ 添付アイテム│ │ │ │
│  │ │ └─────────────────┘ │ │ └─────────────┘ │ │ │
│  │ └─────────────────────┘ └─────────────────┘ │ │
│  └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

### メールリスト仕様
- **アイテム高さ**: 60px
- **アイコン**: 未読/既読表示
- **期限表示**: 残り時間の視覚的表示
- **複数選択**: Ctrl/Shiftキー対応

### 詳細パネル要素
- **送信者情報**: アバター、名前、レベル
- **送信日時**: 相対時間表示（"3時間前"）
- **添付アイテム**: アイコン付きリスト
- **受領ボタン**: 個別/一括選択

## 4. レスポンシブデザイン仕様

### ブレークポイント
- **デスクトップ**: 1024px以上
- **タブレット**: 768px - 1023px
- **モバイル**: 767px以下

### レイアウト変更ルール
```css
/* タブレット */
@media (max-width: 1023px) {
  .main-area {
    flex-direction: column;
  }
  .sidebar {
    width: 100%;
    height: 200px;
  }
}

/* モバイル */
@media (max-width: 767px) {
  .grid {
    grid-template-columns: repeat(3, 1fr);
  }
  .button-group {
    flex-direction: column;
  }
}
```

## 5. アクセシビリティ対応

### キーボードナビゲーション
- **Tabキー**: フォーカス移動
- **Enter/Space**: ボタンアクティベーション
- **Escape**: ウィジェット閉じる
- **矢印キー**: リスト内移動

### スクリーンリーダー対応
- **aria-label**: 重要な要素に説明
- **role属性**: 適切なARIAロール
- **altテキスト**: アイコン画像に説明

## 6. アニメーション仕様

### トランジション効果
- **フェードイン**: 200ms ease-out
- **スライドイン**: 300ms ease-in-out
- **拡大縮小**: 150ms ease-out
- **ローディング**: 回転アニメーション 1s linear infinite

### インタラクションフィードバック
- **ホバー**: 明るさ110%
- **クリック**: スケール95%
- **無効状態**: 透明度50%
- **エラー**: 振動アニメーション

## 7. カラーテーマ設定

### ライトテーマ
```css
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --text-primary: #333333;
  --text-secondary: #666666;
  --border-color: #e0e0e0;
  --accent-color: #2196f3;
  --success-color: #4caf50;
  --warning-color: #ff9800;
  --error-color: #f44336;
}
```

### ダークテーマ
```css
:root {
  --bg-primary: #121212;
  --bg-secondary: #1e1e1e;
  --text-primary: #ffffff;
  --text-secondary: #b3b3b3;
  --border-color: #333333;
  --accent-color: #64b5f6;
  --success-color: #81c784;
  --warning-color: #ffb74d;
  --error-color: #e57373;
}
```

## 8. Blueprint実装ガイド

### ウィジェットブループリント作成手順

#### 共通設定
すべてのウィジェットで以下のカラー設定を適用：

**背景カラー設定**:
- **Primary Background**: `#1a1a2e` (ダークブルー)
- **Secondary Background**: `#16213e` (濃いブルー)
- **Accent Background**: `#0f3460` (明るいブルー)

**テキストカラー設定**:
- **Primary Text**: `#ffffff` (白)
- **Secondary Text**: `#b8b8b8` (グレー)
- **Disabled Text**: `#666666` (薄いグレー)

### 銀行ウィジェット
1. **Widget Blueprint**作成 → **Parent Class**: `BankWidgetBase`
2. **Designer**タブで以下を配置：
   - **Canvas Panel**（ルート） - 背景カラー: `#1a1a2e`
   - **Vertical Box**（メインレイアウト）
   - **Horizontal Box**（ヘッダー） - 背景カラー: `#16213e`
   - **Grid Panel**（残高とアクション）
   - **List View**（取引履歴） - 背景カラー: `#0f3460`

3. **個別カラー配置**:
   - **残高テキスト**: `#00ff88` (緑)
   - **預金ボタン**: `#4caf50` (成功グリーン)
   - **引出しボタン**: `#ff9800` (警告オレンジ)
   - **閉じるボタン**: `#f44336` (エンバーレッド)

### インベントリウィジェット
1. **Widget Blueprint**作成 → **Parent Class**: `InventoryWidget`
2. **Designer**タブで以下を配置：
   - **Uniform Grid Panel**（アイテムグリッド） - 背景カラー: `#1a1a2e`
   - **Scroll Box**（スクロール対応）
   - **Size Box**（固定サイズアイテム） - 背景カラー: `#16213e`

3. **個別カラー配置**:
   - **レアアイテム枠**: `#9c27b0` (紫)
   - **エピックアイテム枠**: `#ff9800` (オレンジ)
   - **レジェンドアイテム枠**: `#f44336` (赤)
   - **通常アイテム枠**: `#666666` (グレー)

### メールウィジェット
1. **Widget Blueprint**作成 → **Parent Class**: `MailboxBaseWidget`
2. **Designer**タブで以下を配置：
   - **List View**（メールリスト） - 背景カラー: `#1a1a2e`
   - **Scroll Box**（詳細パネル） - 背景カラー: `#16213e`
   - **Horizontal Box**（ボタングループ）

3. **個別カラー配置**:
   - **未読メール**: `#64b5f6` (明るい青)
   - **既読メール**: `#666666` (グレー)
   - **期限切れ**: `#f44336` (赤)
   - **添付アイテム**: `#4caf50` (緑)

### カラー設定の適用方法
各ウィジェットコンポーネントで：
1. **Appearance** → **Color and Opacity**を設定
2. **Brush** → **Tint**を個別に設定
3. **Style** → **Normal/Hovered/Pressed**状態で色を分離

### ダイナミックカラー変更
```cpp
// Blueprintで実行時に色を変更する例
Set Color and Opacity (Widget)
- 条件に応じて色を動的に変更
- 例：残高が0の場合は赤色表示
```

## まとめ

各ウィジェットは以下の特徴を持つレイアウト設計：
- **レスポンシブ**: 画面サイズに対応
- **アクセシブル**: キーボードナビゲーション対応
- **統一的**: 共通のデザイン言語
- **拡張可能**: カスタマイズしやすい構造
